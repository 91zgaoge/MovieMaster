# MovieMaster
# 影视管家
对本机影视目录里的电影、电视剧文件进行快速扫描，根据文件名到豆瓣读取影视名称和有关信息，并生成能被Kodi读取的nfo及海报插图。



一直有这个想法，把家里那些硬盘上的电影好好整理一下。最近，重新又拣起了十几年前初学的DELPHI，目前已经初步实现了：同部电影、电视剧归类，自动下载豆瓣简介，自动按射手网规范算出文件Hash后获取射手网字幕。其它字幕站开放API的，实现起来也不难。
自己设想增加的功能：
1、支持PT站RSS获取中文简介，这个应该可以实现。（我所有的电影几乎都是PT站下载的，所以这个功能我觉得很重要，因为有些电影下了之后光看片名想不起来是什么）
2、有个略微好看的界面，这个恐怕很难...
3、实现以上功能后，怎么来整理？是直接整理成中文名字的目录，还是保留原目录，在软件上显示电影名称，有没有什么可以和其它播放软件通用的格式，把电影简介保存下来，其它软件也能自动读取...
最近脑子短路，大家看看还有什么好构想，回帖提出来讨论吧。不过本人只是初学者，入门级，太深奥的技术是没有的，画饼可以，充饥就勉强了。


2016.05.20
好吧，承认吧，码农不是我的活儿。把Demo发来给大家玩玩，完全是个雏形的Demo，就是个意思，应该有无数Bug，原谅我这初学者吧。
使用说明：
在“管理”界面里面添加目录，点击全部扫描。然后在“媒体”界面上点击导入，然后呢，把下载字幕、添加信息等工作交给右键菜单。点击表头可排序。免安装，但为了避免出错，请不要直接放在硬盘根目录执行。
2016.05.22
更新到0.0.1.2版。增加RSS订阅辅助信息和字幕自动下载判断条件设定。调整了扫描目录功能，请下载后重新扫描一遍。
2016.05.30
更新到0.0.1.3版。过去一周太忙，做了些Bug的处理。调整：启动后，程序自动扫描目录并导入。下载字幕时如只有单个对应，不出提示对话框即自动下载。更新信息后在媒体文件位置生成nfo和tbn文件，支持kodi。
2016.06.01
更新到0.0.1.4版。增加手工添加豆瓣ID号，修复BUG若干。在媒体文件位置生成cover.jpg和一个文件：中文电影名.nfo，便于识别。
2017.01.10
更新到0.0.1.5版。因subhd网站修改了搜索方式，跟进修改。修复BUG若干。
2017.01.24
更新0.0.1.5版。修复BUG若干。
2017.02.21
更新到0.0.1.6版。因subhd网站修改了搜索方式，跟进修改。
新增：增加对影片标题提取影片名的过滤词条自行添加功能。
例如：填入以下格式的过滤词条，则自动过滤标题中对应文字。见附图。
代码:

uk|tsks|1080p|hbo|bbc|tvn|Marvels|大河ドラマ|ocn|KO_cn|ko|uxn|hdtv|壹高清|CN|720P



2017.03.22
更新到0.0.1.8版。
1.因subhd网站修改了搜索方式，跟进修改。
2.对数据结构进行调整。
3.判断影片目录中是否有同名相近的字幕，.srt或.ass，有则显示在主窗口上。
4.按Kodi nfo文件结构生成nfo文件，支持剧集。
生成nfo时候能自动分析归纳剧集了。规则：同名同季电视剧的各集<set>到同一剧集里。同名单本但不同版本的同一部电影归到同一剧集里。
参见：
用KODI+影视管家MyMovie PC版实现家庭影库管理
https://bbs.et8.net/bbs/showthread.php?t=1349762

下一步预告：优化对剧集的判断，开发搜索影片库功能。
再下一步：支持数据通过互联网进行更新。从单机版向网络版转化。实现“一人整理，四海共享”，哈哈。


2017.03.24
对 0.0.1.8版进行重要更新。
1.增加数据自动导入功能。
压缩包内附上了我自己的一些数据，可无损导入到你自己的数据中。
2.增加数据备份功能。
每次软件运行结束后会在软件目录下生成Databak目录中，对数据进行备份。
该备份数据如需要恢复，将备份的四个数据文件复制到软件目录下，启动软件即可自动导入历史数据。该备份数据可自由拷贝，用于影片数据共享。比如，视频文件由A硬盘转到B硬盘，只需添加新的视频所在目录，则自动搜索文件与视频数据，跟视频文件目录无关。实现影片的多硬盘自由迁移，仍能迅速恢复视频信息数据。
2017.3.29
1、因subhd网站增加验证，新增到字幕库网站取字幕功能。请下载新版本0.0.1.9,并在管理里面将字幕网站设置为字幕库。
2、修复一些Bug。
2017.4.15
1、手工输入豆瓣电影ID支持对多个文件多选。方便对电视剧集多集或电影多个版本同时更新信息。
2、修复备份数据的重大Bug。
2017.5.4
1、修正和完善对Kodi的nfo文件支持，将剧集准确归类。
2、修复一些Bug。
2017.5.5
1、增加同人画，下载剧照添加为同人画，这下kodi更漂亮了。
2、修复一些Bug。
2017.5.8
更新级别：必须更新
1、修复个别情况下无法添加nfo的问题。
2、修复一些Bug。
2017.5.9
更新级别：重要更新
1、增加字幕同名功能。我们经常碰到不同版本的字幕，但kodi只认同名字幕，所以要将其它版本的字幕更名为与影片同名。手工改太累，特别是碰到多个剧集时候简直头痛。
将不同版本字幕放到影片目录中，与该影片在一个目录内。运行本软件，在列表中选中（可多选）需要同名字幕的那部电影或剧集，按右键点击字幕同名即可。运行成功后不会有提示，但到目录里面看看，哈哈，都帮你自动更名好了。
2、优化到字幕库网站下载字幕的判断，可以下载到更多版本的字幕了。
v0.0.1.15更新级别：必须更新
2017.5.13
修改豆瓣数据的保存方式，避免过大内存占用导致溢出。
v0.0.1.16更新级别：必须更新
2017.5.16
修复内存报错问题。
v0.0.1.17更新级别：必须更新
2017.5.19
修复读入备份文档发生内存报错的问题。

v0.0.1.18更新级别：必须更新
2017.5.24
1、修复更新信息时发生内存报错的问题。
2、修复未更新封面图片的问题。

v0.0.1.19更新级别：必须更新
2017.6.2
修复更新信息时nfo文件未更新的问题。这个问题影响到kodi能否正确读出影片信息。

v0.0.1.20更新级别：必须更新
2017.6.24
1、修复更新信息时候内存报错的问题。
2、修复全新运行软件内存报错的问题。
3、修复关闭软件导致内存报错问题。
v0.0.1.21更新级别：必须更新
2017.8.1
如已经使用旧版本，请在用新版本覆盖时，运行前删除旧的_file.data文件。
1、修复内存报错的问题，主要是目录名中含有日本字@等特殊字符无法转换UTF8时，为空值报错。
2、改正个别错误。
v0.0.1.22更新级别：必须更新
2017.9.11
1、修复内存报错和_file.data报错的问题，原因是在搜索媒体文件时程序出错后会误将错误写入data文件中造成报错。
2、修复第一个媒体文件无法更新信息和获取字幕的问题。改正多处错误，增强稳定性。
v0.0.1.23更新级别：必须更新
2017.10.16
1、更新字幕库网站的字幕下载方式，目前可用。
2、增加影视名称后国别标识。
v0.0.1.24更新级别：必须更新
2017.10.18
1、再次调整字幕库网站的字幕下载方式，目前可用。
v0.0.1.25更新级别：必须更新
2017.11.7
1、再次根据源站域名变化，调整字幕库网站的字幕下载方式，目前可用。
v0.0.1.26更新级别：必须更新
2018.1.30
1、再次根据源站域名变化，调整字幕库网站的字幕下载方式，目前可用。
2、修正个别BUG。
3、增加手工输入剧集号。
4、修订字幕同名功能，即同一目录下，不同版本命名的字幕，与影音文件自动同名功能。如720P的版本字幕用于1080P版本。


v.0.27 建议更新
2018.4.28
1、基本上把报错的bug捉了一遍，算是稳定版吧。
2、下载字幕问题没有解决，等...下个版本吧。
